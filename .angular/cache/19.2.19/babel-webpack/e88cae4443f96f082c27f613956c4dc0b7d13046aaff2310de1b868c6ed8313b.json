{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../services/order.service\";\nimport * as i4 from \"@angular/common\";\nfunction ProfileComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"div\", 21)(3, \"div\", 22)(4, \"p\", 23);\n    i0.ɵɵtext(5, \"Total Spent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h3\", 24);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementStart(9, \"small\", 25);\n    i0.ɵɵtext(10, \"EGP\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(11, \"div\", 21)(12, \"div\", 22)(13, \"p\", 23);\n    i0.ɵɵtext(14, \"Member Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"h3\", 26);\n    i0.ɵɵtext(16, \"Verified\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(17, \"div\", 27)(18, \"h5\", 28);\n    i0.ɵɵtext(19, \"Profile Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 29)(21, \"div\", 30)(22, \"label\", 31);\n    i0.ɵɵtext(23, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\", 32);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 30)(27, \"label\", 31);\n    i0.ɵɵtext(28, \"Account Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"span\", 32);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(8, 4, ctx_r0.totalSpent), \" \");\n    i0.ɵɵadvance(18);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.user.firstName, \" \", ctx_r0.user.lastName, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.user.email);\n  }\n}\nfunction ProfileComponent_div_27_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵelement(1, \"i\", 36);\n    i0.ɵɵelementStart(2, \"p\", 37);\n    i0.ɵɵtext(3, \"You haven't made any orders yet.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProfileComponent_div_27_div_4_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48);\n    i0.ɵɵelement(1, \"img\", 49);\n    i0.ɵɵelementStart(2, \"div\", 50)(3, \"h6\", 51);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 52);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 53);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", item_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Qty: \", item_r2.quantity, \" | Price: \", item_r2.price, \" EGP\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.price * item_r2.quantity, \" EGP \");\n  }\n}\nfunction ProfileComponent_div_27_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"div\", 39)(2, \"div\")(3, \"span\", 40);\n    i0.ɵɵtext(4, \"Order #\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 41);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"span\", 42);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 43);\n    i0.ɵɵtemplate(10, ProfileComponent_div_27_div_4_div_10_Template, 9, 5, \"div\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 45)(12, \"span\", 46);\n    i0.ɵɵtext(13, \"Total Paid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 47);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(order_r3._id.slice(-6));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", order_r3.status === \"Completed\" ? \"bg-light-success text-success\" : \"bg-light-primary text-primary\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", order_r3.status || \"Confirmed\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", order_r3.items);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", order_r3.total || ctx_r0.calculateOrderTotal(order_r3), \" EGP\");\n  }\n}\nfunction ProfileComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"h4\", 28);\n    i0.ɵɵtext(2, \"Order History\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProfileComponent_div_27_div_3_Template, 4, 0, \"div\", 33)(4, ProfileComponent_div_27_div_4_Template, 16, 5, \"div\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.orders.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.orders);\n  }\n}\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  class ProfileComponent {\n    auth;\n    router;\n    orderService;\n    user = {};\n    orders = [];\n    activeTab = 'dashboard';\n    totalSpent = 0;\n    constructor(auth, router, orderService) {\n      this.auth = auth;\n      this.router = router;\n      this.orderService = orderService;\n    }\n    ngOnInit() {\n      if (!this.auth.isLoggedIn()) {\n        this.router.navigate(['/login']);\n        return;\n      }\n      this.user = this.auth.currentUser;\n      this.loadOrders();\n    }\n    loadOrders() {\n      this.orderService.getMyOrders().subscribe({\n        next: res => {\n          // ترتيب الطلبات من الأحدث للأقدم\n          this.orders = res.reverse();\n          this.calculateTotalSpent();\n        },\n        error: err => console.error('Error fetching orders:', err)\n      });\n    }\n    calculateTotalSpent() {\n      this.totalSpent = this.orders.reduce((acc, order) => {\n        return acc + (order.total || this.calculateOrderTotal(order));\n      }, 0);\n    }\n    calculateOrderTotal(order) {\n      return order.items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    }\n    logout() {\n      this.auth.logout();\n      this.router.navigate(['/login']);\n    }\n    static ɵfac = function ProfileComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ProfileComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.OrderService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      decls: 28,\n      vars: 11,\n      consts: [[1, \"profile-header\", \"shadow-sm\"], [1, \"container\", \"pb-5\"], [1, \"row\", \"mt-n5\"], [1, \"col-lg-4\"], [1, \"card\", \"custom-card\", \"shadow-sm\", \"text-center\", \"p-4\", \"mb-4\", \"mt-n5\"], [1, \"profile-avatar-wrapper\"], [1, \"rounded-circle\", \"profile-img\", \"mb-3\", 3, \"src\"], [1, \"fw-bold\", \"mb-1\"], [1, \"text-muted\", \"small\", \"mb-4\"], [1, \"nav\", \"flex-column\", \"nav-pills\", \"text-start\"], [1, \"nav-link\", 3, \"click\"], [1, \"bi\", \"bi-grid\", \"me-2\"], [1, \"nav-link\", \"d-flex\", \"justify-content-between\", \"align-items-center\", 3, \"click\"], [1, \"bi\", \"bi-bag\", \"me-2\"], [1, \"badge\", \"bg-secondary\", \"rounded-pill\", \"small\"], [1, \"nav-link\", \"text-danger\", \"shadow-none\", 3, \"click\"], [1, \"bi\", \"bi-box-arrow-right\", \"me-2\"], [1, \"col-lg-8\"], [\"class\", \"animate__animated animate__fadeIn\", 4, \"ngIf\"], [1, \"animate__animated\", \"animate__fadeIn\"], [1, \"row\", \"g-3\", \"mb-4\"], [1, \"col-md-6\"], [1, \"card\", \"custom-card\", \"p-4\", \"bg-white\", \"shadow-sm\", \"border-0\"], [1, \"text-muted\", \"small\", \"mb-1\", \"text-uppercase\", \"fw-bold\"], [1, \"fw-bold\", \"text-dark\"], [1, \"fs-6\"], [1, \"fw-bold\", \"text-success\"], [1, \"card\", \"custom-card\", \"shadow-sm\", \"p-4\", \"border-0\"], [1, \"fw-bold\", \"mb-4\"], [1, \"row\", \"g-4\"], [1, \"col-sm-6\"], [1, \"text-muted\", \"small\", \"d-block\"], [1, \"fw-medium\"], [\"class\", \"text-center py-5 bg-white rounded-4 shadow-sm\", 4, \"ngIf\"], [\"class\", \"card custom-card order-card shadow-sm mb-4 border-0\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", \"py-5\", \"bg-white\", \"rounded-4\", \"shadow-sm\"], [1, \"bi\", \"bi-cart-x\", \"display-4\", \"text-muted\"], [1, \"mt-3\", \"text-muted\"], [1, \"card\", \"custom-card\", \"order-card\", \"shadow-sm\", \"mb-4\", \"border-0\"], [1, \"card-header\", \"bg-white\", \"border-0\", \"py-3\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"text-muted\", \"small\"], [1, \"fw-bold\", \"ms-1\", \"text-uppercase\"], [1, \"badge\", \"status-badge\", 2, \"background-color\", \"#ecfdf5\", \"color\", \"#059669\", 3, \"ngClass\"], [1, \"card-body\", \"pt-0\"], [\"class\", \"item-row d-flex align-items-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-footer\", \"bg-light\", \"border-0\", \"py-3\", \"d-flex\", \"justify-content-between\"], [1, \"fw-bold\", \"text-muted\"], [1, \"fw-bold\", \"text-primary\"], [1, \"item-row\", \"d-flex\", \"align-items-center\"], [\"width\", \"60\", \"height\", \"60\", 1, \"rounded-3\", \"me-3\", 2, \"object-fit\", \"cover\", 3, \"src\"], [1, \"flex-grow-1\"], [1, \"mb-0\", \"fw-bold\", \"small\"], [1, \"text-muted\"], [1, \"text-end\", \"fw-bold\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"div\", 0);\n          i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5);\n          i0.ɵɵelement(6, \"img\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"h4\", 7);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"p\", 8);\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"div\", 9)(12, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_12_listener() {\n            return ctx.activeTab = \"dashboard\";\n          });\n          i0.ɵɵelement(13, \"i\", 11);\n          i0.ɵɵtext(14, \" Dashboard \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 12);\n          i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_15_listener() {\n            return ctx.activeTab = \"orders\";\n          });\n          i0.ɵɵelementStart(16, \"span\");\n          i0.ɵɵelement(17, \"i\", 13);\n          i0.ɵɵtext(18, \" My Orders\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"span\", 14);\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(21, \"hr\");\n          i0.ɵɵelementStart(22, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function ProfileComponent_Template_button_click_22_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelement(23, \"i\", 16);\n          i0.ɵɵtext(24, \" Logout \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(25, \"div\", 17);\n          i0.ɵɵtemplate(26, ProfileComponent_div_26_Template, 31, 6, \"div\", 18)(27, ProfileComponent_div_27_Template, 5, 2, \"div\", 18);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"src\", \"https://ui-avatars.com/api/?name=\" + ctx.user.firstName + \"+\" + ctx.user.lastName + \"&background=6366f1&color=fff&size=128\", i0.ɵɵsanitizeUrl);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate2(\"\", ctx.user.firstName, \" \", ctx.user.lastName, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.user.email);\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"active\", ctx.activeTab === \"dashboard\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵclassProp(\"active\", ctx.activeTab === \"orders\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate(ctx.orders.length);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"dashboard\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"orders\");\n        }\n      },\n      dependencies: [CommonModule, i4.NgClass, i4.NgForOf, i4.NgIf, i4.DecimalPipe],\n      styles: [\".profile-header[_ngcontent-%COMP%]{height:45vh;background:linear-gradient(#00000080,#00000080),url(https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?auto=format&fit=crop&w=1500&q=80);background-size:cover;background-position:center}.profile-avatar-wrapper[_ngcontent-%COMP%]{margin-top:-70px;position:relative;z-index:2}.profile-img[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border:5px solid white;box-shadow:0 10px 25px #0000001a}.custom-card[_ngcontent-%COMP%]{border:none;border-radius:20px;transition:all .3s ease}.custom-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#4b5563;border-radius:12px;padding:12px 18px;margin-bottom:8px;font-weight:500;transition:.2s}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:#4f46e5;color:#fff}.order-card[_ngcontent-%COMP%]{border-left:5px solid #4f46e5}.status-badge[_ngcontent-%COMP%]{padding:6px 14px;border-radius:50px;font-size:.75rem;font-weight:600}.item-row[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px dashed #eee}.item-row[_ngcontent-%COMP%]:last-child{border-bottom:none}@media (max-width: 768px){.profile-header[_ngcontent-%COMP%]{height:150px}.profile-img[_ngcontent-%COMP%]{width:110px;height:110px}}\"]\n    });\n  }\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}